
##  Формулировка задания

Реализовать функцию
`get_currencies(currency_codes, url)`
которая обращается к API по адресу:
[`https://www.cbr-xml-daily.ru/daily_json.js`](https://www.cbr-xml-daily.ru/daily_json.js)
и возвращает словарь курсов валют для валют из списка `currency_codes`.

### Требования:

* Ключи возвращаемого словаря — символьные коды валют (например, `"USD"`).
* Значения — текущие курсы этих валют.
* В случае ошибки запроса функция должна вернуть `None`.
* Для HTTP-запроса используется `requests.get()`.

### Исключения, которые должны обрабатываться:

* в ответе не содержатся курсы валют;
* в словаре курсов нет нужной валюты;
* ошибка выполнения запроса к API.

---

## Этапы реализации

### **Итерация 1**

Реализовано базовое логирование ошибок через `print(..., file=sys.stdout)` и конструкцию `try-except`.

### **Итерация 2**

Создан декоратор `@log`, который оборачивает функцию `get_currencies()` и обрабатывает все исключения в одном месте.

### **Итерация 3**

Подключён модуль `logging`.
Логирование теперь ведётся в файл `lab_6/logs.log` в кодировке UTF-8.
Для каждого события указывается дата, уровень важности (`INFO`, `WARNING`, `ERROR`) и сообщение.

---

##  Структура проекта

```
lab_6/
│
├── get_currencies.py     # Основная функция и декоратор
├── tests.py              # Unit-тесты
├── logs.log              # Файл логов (создаётся автоматически)
└── README.md             # Отчёт по лабораторной работе
```

---

##  Тестирование

Для тестирования использовался модуль `unittest`.

Проверялись следующие случаи:

1.  Корректная работа функции — возвращает правильные ключи и значения.
2.  Обработка ошибок (например, при недоступности API).
3.  Запись предупреждений и ошибок в лог-файл (`logs.log`).

Для тестирования использовалась библиотека `unittest.mock`, чтобы имитировать работу API без реального запроса.

---

##  Результаты тестирования

Все тесты успешно пройдены.
При запуске команды:

```bash
python -m unittest lab_6/tests.py
```

Результат:

```
----------------------------------------------------------------------
Ran 3 tests in 0.004s

OK
```

---

##  Вывод

В ходе выполнения лабораторной работы были освоены:

* обработка исключений (`try-except`);
* применение декораторов для логирования ошибок;
* использование модуля `logging` для записи событий в файл;
* автоматическое тестирование с помощью `unittest` и `mock`.

Программа корректно обрабатывает исключения, логирует ошибки и предупреждения, возвращает актуальные данные о курсах валют.
Все тесты подтверждают стабильную работу и правильность реализации.
